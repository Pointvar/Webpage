(()=>{"use strict";var e,t={734:(e,t,r)=>{var n=r(7462),a=r(6351),l=r(7294),c=r(3935),o=r(9226),i=r(4634),s=r(5861),u=r(7757),f=r.n(u),m=r(9669),d=r.n(m),p=r(8470);d().defaults.headers["X-Requested-With"]="XMLHttpRequest",d().interceptors.response.use((function(e){var t=e.data;return t.success?t.data:3e3===t.data.code?(p.Z.error({content:t.data.msg,okText:l.createElement("a",{href:t.data.process},"点我授权")}),Promise.reject(t)):(p.Z.error({title:"后端接口调用错误，请联系客服处理。",content:t.data.msg}),Promise.reject(t))}),(function(e){return p.Z.error({title:"后端接口调用错误，请联系客服处理。",content:e.response.statusText}),Promise.reject(e)}));const y=d();var v=function(e){return y.post("ajax_get_shop_info",e)},h=function(e){return y.post("ajax_create_copy_task",e)},g=function(e){return y.post("ajax_get_copy_complex_tasks",e)},E=function(e){return y.post("ajax_hide_copy_complex_tasks",e)},_=function(e){return y.post("ajax_get_logistic_templates",e)},k=function(e){return y.post("ajax_get_authorize_cats",e)},I=(0,i.hg)("common/getShopInfo",(0,s.Z)(f().mark((function e(){var t,r,n=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,v(t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))),b=(0,i.oM)({name:"common",initialState:{shopInfo:{}},reducers:{},extraReducers:function(e){e.addCase(I.fulfilled,(function(e,t){e.shopInfo=t.payload}))}}),S=function(e){return e.common.shopInfo};const x=b.reducer;var Z=(0,i.hg)("copy/createCopyTask",(0,s.Z)(f().mark((function e(){var t,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,h(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),w=(0,i.hg)("copy/getCopyComplexTasks",(0,s.Z)(f().mark((function e(){var t,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,g(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),C=(0,i.hg)("copy/hideCopyComplexTasks",(0,s.Z)(f().mark((function e(){var t,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,E(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),T=(0,i.hg)("copy/getLogisticTemplates",(0,s.Z)(f().mark((function e(){var t,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,_(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),L=(0,i.hg)("copy/getAuthorizeCats",(0,s.Z)(f().mark((function e(){var t,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,k(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))),N={complexTasks:[],selectedKeys:[],filterData:{filterTitle:null,filterId:null,filterPlatform:"#ALL#",filterStatus:"#ALL#"},logisticTemplates:[],authorizeCats:[],loopTimes:0,currentPageDatas:[]},A=(0,i.oM)({name:"copy",initialState:N,reducers:{setFilterTitle:function(e,t){e.filterData.filterTitle=t.payload},setFilterId:function(e,t){e.filterData.filterId=t.payload},setFilterPlatform:function(e,t){e.filterData.filterPlatform=t.payload},setfilterStatus:function(e,t){e.filterData.filterStatus=t.payload},setFilterData:function(e){e.filterData=N.filterData},setSelectedKeys:function(e,t){e.selectedKeys=t.payload},setLoopTimes:function(e,t){e.loopTimes=t.payload},setCurrentPageDatas:function(e,t){e.currentPageDatas=t.payload}},extraReducers:function(e){e.addCase(Z.fulfilled,(function(){})),e.addCase(w.fulfilled,(function(e,t){e.complexTasks=t.payload})),e.addCase(C.fulfilled,(function(e,t){e.complexTasks=t.payload,e.selectedKeys=[]})),e.addCase(T.fulfilled,(function(e,t){e.logisticTemplates=t.payload.map((function(e){return{key:e.template_id,value:e.template_name}}))})),e.addCase(L.fulfilled,(function(e,t){e.authorizeCats=t.payload}))}}),F=A.actions,P=F.setFilterTitle,O=F.setFilterId,j=F.setFilterPlatform,D=F.setfilterStatus,M=F.setFilterData,R=F.setSelectedKeys,H=F.setLoopTimes,K=F.setCurrentPageDatas,q=function(e){return e.copy.complexTasks},z=function(e){return e.copy.selectedKeys},W=function(e){return e.copy.filterData},V=function(e){return e.copy.loopTimes},B=function(e){return e.copy.currentPageDatas};const Q=A.reducer,X=(0,i.xC)({reducer:{common:x,copy:Q}});var U=r(7183),$=r(9772),G=r(5241),J=r(1577),Y=r(6883),ee=r(328),te=r(669),re=r(2925),ne=r(9210),ae=r(7066),le=r(4e3),ce=r(5035),oe=r(9447),ie=(r(63),U.Z.Header),se=l.createElement("div",{className:"user-popover",style:{display:"flex",justifyContent:"space-between",width:180}},l.createElement("a",{href:"/auth/pinduoduo_logout"},l.createElement(le.Z,null),"切换账号"),l.createElement("a",{href:"/auth/pinduoduo_logout",style:{color:"red"}},l.createElement(ce.Z,null),"退出登陆"));const ue=function(e){var t=e.activeLink,r=e.NavMenus,n=e.shopInfo,a=n.shop_name,c=n.shop_logo;return l.createElement(ie,null,l.createElement("div",{className:"logo"},l.createElement("a",{href:"/index"},l.createElement("img",{src:oe}))),l.createElement("div",{className:"menus"},l.createElement(ne.Z,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[t],style:{fontSize:20}},r.map((function(e){return l.createElement(ne.Z.Item,{key:e.key},l.createElement("a",{href:e.link},e.name))})))),l.createElement(G.Z,{placement:"bottom",content:se,trigger:"hover"},l.createElement("div",{className:"user"},l.createElement("img",{src:c}),l.createElement("span",null,a))),l.createElement("div",{className:"operate"},l.createElement(J.Z,{type:"primary"},l.createElement("a",{href:"tencent://message/?uin=1655605815"},"联系我们(Windows)")),l.createElement(ae.Z,{title:"加入QQ群后联系管理员:958237009"},l.createElement(J.Z,{type:"primary"},"联系我们(MAC)"))))};var fe=r(7031),me=r(5779),de=r(5443),pe=fe.Z.Option,ye=me.Z.Search;const ve=function(e){var t=e.initialValues,r=e.form,n=e.statusMaps,a=e.platformMaps,c=e.dataSource,o=e.selectedKeys,i=e.onSearchTitle,s=e.onSearchId,u=e.onSearchPlatform,f=e.onSearchStatus,m=e.onClickRestSearch,d=e.onClickHideTasks;return l.createElement("div",{className:"table_header_box"},l.createElement(Y.Z,{initialValues:t,form:r,className:"filter_box"},l.createElement(Y.Z.Item,{className:"filter_element",label:"标题搜索",name:"filterTitle"},l.createElement(ye,{placeholder:"支持商品标题模糊搜索",allowClear:!0,onSearch:i})),l.createElement(Y.Z.Item,{className:"filter_element",label:"商品ID搜索",name:"filterId"},l.createElement(ye,{placeholder:"支持源ID和上货后ID搜索",allowClear:!0,style:{width:230},onSearch:s})),l.createElement(Y.Z.Item,{className:"filter_element",label:"商品来源",name:"filterPlatform"},l.createElement(fe.Z,{style:{width:84},onChange:u},a.map((function(e){var t=e.key,r=e.value;return l.createElement(pe,{key:t,value:t},r)})))),l.createElement(Y.Z.Item,{className:"filter_element",label:"上货状态",name:"filterStatus"},l.createElement(fe.Z,{style:{width:84},onChange:f},n.map((function(e){var t=e.key,r=e.value;return l.createElement(pe,{key:t,value:t},r)})))),l.createElement(Y.Z.Item,{className:"filter_element"},l.createElement(J.Z,{className:"filter_element",type:"primary",onClick:m},"搜索重置"))),l.createElement("div",{className:"operator"},l.createElement("div",{className:"operator_info"},l.createElement("span",null,"已选择:",l.createElement("span",{className:"selectMessage"},o.length),"条 /"),l.createElement("span",null," 总记录:",c.length,"条")),l.createElement(de.Z,{title:l.createElement("span",null,"亲，确定删除已选择的上货记录吗?",l.createElement("br",null),"该操作仅会删除软件内记录，不删除店铺内商品。"),okText:"确定",cancelText:"取消",onConfirm:d},l.createElement(J.Z,{type:"primary",danger:!0},"删除已选"))))};function he(e,t){var r=(0,l.useRef)(null),n=e.rowSelection,a=e.dataSource,c=e.columns;return(0,l.useImperativeHandle)(t,(function(){return{getCurrentPageData:function(){return Array.from(r.current.querySelectorAll(".ant-table-row")).map((function(e){return e.getAttribute("data-row-key")}))}}})),l.createElement("div",{className:"table-area-box",ref:r},l.createElement(ee.Z,{tableLayout:"fixed",rowKey:"_id",bordered:!0,rowSelection:n,dataSource:a,columns:c}))}const ge=(0,l.forwardRef)(he);var Ee=U.Z.Footer;const _e=function(){return l.createElement(Ee,{className:"footer-container"},l.createElement("span",null,"杭州矩阵云网络技术有限公司版权所有©"),l.createElement("a",{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noreferrer"},"浙ICP备2021026933号"))};var ke=r(6486),Ie=r.n(ke);function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Se=U.Z.Content,xe={NavMenus:[{name:"一键复制",link:"/link_copy",key:"link_copy"},{name:"我的记录",link:"/copy_record",key:"copy_record"}],activeLink:"copy_record"},Ze=[{key:"#ALL#",value:"全部"},{key:"#WAIT#",value:"等待中"},{key:"#PROCESS#",value:"处理中"},{key:"#FINISH#",value:"任务完成"},{key:"#FAIL#",value:"任务失败"}],we=Ie().reduce(Ze,(function(e,t){return e[t.key]=t.value,e}),{}),Ce=Ie().reduce([{key:"#WAIT#",value:"等待中"},{key:"#PROCESS#",value:"审核中"},{key:"#FINISH#",value:"审核通过"},{key:"#FAIL#",value:"审核驳回"}],(function(e,t){return e[t.key]=t.value,e}),{}),Te=[{key:"#ALL#",value:"全部"},{key:"#TAOBAO#",value:"淘宝"},{key:"#TIANMAO#",value:"天猫"}],Le=Ie().reduce(Te,(function(e,t){return e[t.key]=t.value,e}),{}),Ne=[{title:"源商品信息",dataIndex:"src_item",width:400,align:"center",className:"src-item-info",ellipsis:!0,render:function(e,t){return t.main_pic&&t.itme_title?l.createElement(l.Fragment,null,l.createElement("img",{src:"".concat(t.main_pic,"_60x60q90.jpg")}),l.createElement("a",{href:t.copy_url,target:"_blank",rel:"noreferrer"},l.createElement("span",null,t.itme_title))):l.createElement("a",{href:t.copy_url},t.parsed_url)}},{title:"源商品ID",dataIndex:"src_num_iid",align:"center"},{title:"来源",dataIndex:"item_source",align:"center",render:function(e){return Le[e]}},{title:"上货时间",dataIndex:"c_time",align:"center"},{title:"商品ID",dataIndex:"dst_num_iid",align:"center"},{title:"上货状态",dataIndex:"status",align:"center",render:function(e,t){var r=we[e],n=0,a="normal",c="rgb(0, 0, 0)";return"#PROCESS#"===e?(n=t.process_step,c="rgb(24, 144, 255)"):"#FINISH#"===e?(n=100,a="success",c="rgb(82, 195, 27)"):"#FAIL#"===e&&(n=100,a="exception",c="rgb(255, 77, 78)"),l.createElement(l.Fragment,null,l.createElement($.Z,{type:"circle",percent:n,status:a,width:40}),l.createElement("div",{className:"x",style:{color:c}},r))}},{title:"审核状态",dataIndex:"check_status",align:"center",render:function(e,t){var r,n=Ce[e],a=0,c="normal",o="rgb(0, 0, 0)";return"#PROCESS#"===e?(a=50,o="rgb(24, 144, 255)"):"#FINISH#"===e?(a=100,c="success",o="rgb(82, 195, 27)"):"#FAIL#"===e&&(a=100,c="exception",o="rgb(255, 77, 78)",r=l.createElement("span",null,"驳回原因: ",t.check_fail_msg,l.createElement("hr",null)," ",l.createElement("strong",null,"点击右侧编辑商品按钮编辑后提交。"))),r?l.createElement(G.Z,{placement:"top",content:r,trigger:"hover"},l.createElement($.Z,{type:"circle",percent:a,status:c,width:40}),l.createElement("div",{style:{color:o}},n)):l.createElement(l.Fragment,null,l.createElement($.Z,{type:"circle",percent:a,status:c,width:40}),l.createElement("div",{style:{color:o}},n))}},{title:"操作",key:"action",align:"center",render:function(e,t){var r;t.dst_num_iid&&("#FINISH#"===t.check_status?r="https://mms.pinduoduo.com/goods/goods_list/transfer?id=".concat(t.dst_num_iid):"#FAIL#"===t.check_status&&(r="https://mms.pinduoduo.com/goods/goods_return_detail?id=".concat(t.dst_num_iid)));var n=!r;return l.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},l.createElement(J.Z,{type:"dashed",disabled:n},"编辑商品"))}}];function Ae(){var e=(0,o.I0)(),t=Y.Z.useForm(),r=(0,a.Z)(t,1)[0],c=(0,l.useRef)(null),i=(0,o.v9)(S);(0,l.useEffect)((function(){e(I({})),e(w({}))}),[]);var s=(0,o.v9)(q),u=(0,o.v9)(W),f=u.filterTitle,m=u.filterId,d=u.filterPlatform,p=u.filterStatus;f&&(s=s.filter((function(e){return Ie().includes(e.itme_title,f)}))),m&&(s=s.filter((function(e){return Ie().isEqual(e.src_num_iid,m)||Ie().isEqual(e.dst_num_iid,m)}))),"#ALL#"!==d&&(s=s.filter((function(e){return Ie().isEqual(e.item_source,d)}))),"#ALL#"!==p&&(s=s.filter((function(e){return Ie().isEqual(e.status,p)})));var y,v=(0,o.v9)(z),h={selectedKeys:v,onChange:function(t){e(R(t))},selections:[ee.Z.SELECTION_ALL,ee.Z.SELECTION_NONE]},g=(0,o.v9)(V),E=(0,o.v9)(B);y=g<=12?5e3:g<=24?1e4:g<=36?3e4:null;var _,k=[],b=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){o=!0,l=e},f:function(){try{c||null==r.return||r.return()}finally{if(o)throw l}}}}(E);try{for(b.s();!(_=b.n()).done;){var x=_.value;k.push(x.status),k.push(x.check_status)}}catch(e){b.e(e)}finally{b.f()}return Ie().filter(k,(function(e){return"#FINISH#"!==e||"#FAIL#"!==e}))||(y=null),function(e,t){var r=(0,l.useRef)(e);(0,l.useEffect)((function(){r.current=e}),[e]),(0,l.useEffect)((function(){if(null!==t){var e=setInterval((function(){return r.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){!function(){if(c.current){var t=c.current.getCurrentPageData(),r=s.filter((function(e){return Ie().includes(t,e._id)}));e(K(r))}}(),e(w({})),e(H(g+1))}),y),l.createElement(l.Fragment,null,l.createElement(ue,(0,n.Z)({},xe,{shopInfo:i})),l.createElement(Se,null,l.createElement(ve,{initialValues:{filterTitle:null,filterId:null,filterPlatform:"#ALL#",filterStatus:"#ALL#"},form:r,statusMaps:Ze,platformMaps:Te,dataSource:s,selectedKeys:v,onSearchTitle:function(t){e(P(t))},onSearchId:function(t){e(O(t))},onSearchPlatform:function(t){e(j(t))},onSearchStatus:function(t){e(D(t))},onClickRestSearch:function(){r.resetFields(),e(M())},onClickHideTasks:function(){e(C({in_ids:v}))}}),l.createElement(ge,{ref:c,columns:Ne,dataSource:s,rowSelection:h})),l.createElement(_e,null))}c.render(l.createElement(te.ZP,{locale:re.Z},l.createElement(o.zt,{store:X},l.createElement(Ae,null))),document.getElementById("root"))},9447:(e,t,r)=>{e.exports=r.p+"asset/kjsh_logo_b1979a.png"}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(l.exports,l,l.exports,n),l.loaded=!0,l.exports}n.m=t,e=[],n.O=(t,r,a,l)=>{if(!r){var c=1/0;for(u=0;u<e.length;u++){for(var[r,a,l]=e[u],o=!0,i=0;i<r.length;i++)(!1&l||c>=l)&&Object.keys(n.O).every((e=>n.O[e](r[i])))?r.splice(i--,1):(o=!1,l<c&&(c=l));if(o){e.splice(u--,1);var s=a();void 0!==s&&(t=s)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,a,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.j=809,n.p="/static/",(()=>{var e={809:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,l,[c,o,i]=r,s=0;for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(i)var u=i(n);for(t&&t(r);s<c.length;s++)l=c[s],n.o(e,l)&&e[l]&&e[l][0](),e[c[s]]=0;return n.O(u)},r=self.webpackChunkclient=self.webpackChunkclient||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[736],(()=>n(734)));a=n.O(a)})();